<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<button class="btn cart-btn" th:onclick="'makeOrder(' + ${restaurant.id} + ');'">주문 하기</button>
<script>
function makeOrder(restaurantId) {
if (!authorization) {
alert('인증 정보가 없습니다. 로그인이 필요합니다.');
return;
}

// 서버의 makeOrder 메소드 호출
fetch(`/restaurants/${restaurantId}/orders`, {
method: 'PATCH',
headers: {
'Authorization': 'Bearer ' + authorization,
}
})
.then(response => {
if (response.ok) {
return response.text();
} else {
throw new Error('Network response was not ok.');
}
})
.then(text => {
alert('주문이 완료되었습니다.');
window.location.reload(); // 예시로 페이지 새로고침
})
.catch(error => {
console.error('주문 처리 중 문제가 발생했습니다:', error);
alert('주문 처리 중 문제가 발생했습니다.');
});
}

function placeOrder(restaurantId, menuId) {
if (!authorization) {
alert('인증 정보가 없습니다. 로그인이 필요합니다.');
return;
}
// readCurrentOrder 메서드를 호출하여 주문 정보를 가져옵니다.
fetch(`/restaurants/${restaurantId}/orders`, {
method: 'GET',
headers: {
'Authorization': 'Bearer ' + authorization,
}
})
.then(response => {
if (response.ok) {
return response.text();
} else {
throw new Error('Network response was not ok.');
}
})
.then(text => {
// 새 창을 열어서 주문 정보를 표시
var newWindow = window.open('', '_blank');
newWindow.document.write('<html><head><title>주문 정보</title></head><body><h1>주문 정보</h1><p>' + text + '</p></body></html>');
})
.catch(error => {
console.error('주문 정보를 가져오는 중 문제가 발생했습니다:', error);
alert('주문 정보를 가져오는 중 문제가 발생했습니다.');
});
}
</script>
</body>
</html>



<script>
    function makeOrder(restaurantId) {
        if (!authorization) {
            alert('인증 정보가 없습니다. 로그인이 필요합니다.');
            return;
        }

// 서버의 makeOrder 메소드 호출
        fetch(`/restaurants/${restaurantId}/orders`, {
            method: 'PATCH',
            headers: {
                'Authorization': 'Bearer ' + authorization,
            }
        })
            .then(response => {
                if (response.ok) {
                    return response.text();
                } else {
                    throw new Error('Network response was not ok.');
                }
            })
            .then(text => {
                alert('주문이 완료되었습니다.');
                window.location.reload(); // 예시로 페이지 새로고침
            })
            .catch(error => {
                console.error('주문 처리 중 문제가 발생했습니다:', error);
                alert('주문 처리 중 문제가 발생했습니다.');
            });
    }

    function placeOrder(restaurantId, menuId) {
        if (!authorization) {
            alert('인증 정보가 없습니다. 로그인이 필요합니다.');
            return;
        }
// readCurrentOrder 메서드를 호출하여 주문 정보를 가져옵니다.
        fetch(`/restaurants/${restaurantId}/orders`, {
            method: 'GET',
            headers: {
                'Authorization': 'Bearer ' + authorization,
            }
        })
            .then(response => {
                if (response.ok) {
                    return response.text();
                } else {
                    throw new Error('Network response was not ok.');
                }
            })
            .then(text => {
// 새 창을 열어서 주문 정보를 표시
                var newWindow = window.open('', '_blank');
                newWindow.document.write('<html><head><title>주문 정보</title></head><body><h1>주문 정보</h1><p>' + text + '</p></body></html>');
            })
            .catch(error => {
                console.error('주문 정보를 가져오는 중 문제가 발생했습니다:', error);
                alert('주문 정보를 가져오는 중 문제가 발생했습니다.');
            });
    }
</script>
